### 1. 什麼是「Score Matching」（分數匹配）？

首先，你得先知道什麼是 **「Score」（分數）**。

#### 什麼是 Score？

想像一下，你把世界上所有「真實的貓咪照片」都丟在一個很大的地圖上。
* 照片很像的地方，它們會**聚集**在一起，形成一座「高山」（機率很高）。
* 那些不像貓的地方（例如純雜訊、或是一張狗的照片），就是「平地」或「峽谷」（機率很低）。

**「Score」就是地圖上每一個點的「指南針」。**

這個指南針永遠指向「**最快爬上『真實貓咪山』山頂**」的方向。
* 如果你在地圖上的 A 點（一張有點像貓的圖），指南針會指向 B 點（一張更像貓的圖）。
* 如果你已經在山頂了（一張完美的貓照），指南針就不動了（分數為 0）。

#### 什麼是 Score Matching？

**「Score Matching」就是「訓練一個 AI，讓它學會看懂這個指南針」。**

我們希望訓練一個 AI 模型，你給它*任何一張圖*（就算是雜訊），它都能告訴你：「嘿，往這個方向修改，你的圖會更像一張『真實的貓咪』！」

**但這裡有個大問題：** 我們根本沒有那張「貓咪地圖」，也不知道「山頂」在哪（不然我們就不需要 AI 了）。

所以，科學家想出了一個絕妙的技巧，叫做 **Denoising Score Matching (去噪分數匹配)**，這才是重點：

1.  **我們不當地圖繪製員，我們當「老師」：**
    * 拿一張*真實的*貓咪照片（我們知道這是「標準答案」）。
    * 在上面**故意撒上一些「雜訊」**（noise），把它弄得有點模糊。
2.  **給 AI 出考題：**
    * 把這張「加了雜訊」的圖丟給 AI。
    * 問 AI：「*我是怎麼把這張圖弄髒的？請你猜猜看我加了什麼雜訊？*」
3.  **訓練 AI（匹配）：**
    * AI 會試著「猜測」那個雜訊。
    * 我們（老師）有標準答案（因為雜訊是我們自己加的！）。
    * 如果 AI 猜錯了，我們就修正它。
    * **「Score Matching」** 就是讓 AI 猜測的「雜訊」跟「真實的雜訊」越來越*匹配*（match）的過程。

**為什麼這有用？**
如果 AI 學會了*完美地*「預測出雜訊」，那它不就等於知道了「**反方向＝通往乾淨照片的路**」嗎？

這時，AI 就學會了那個「指南針」：在任何一張「有雜訊的圖」上，它都能指出「通往『更乾淨』的圖」的方向。

---

### 2. 它如何在「Score-based (Diffusion) Models」中運作？

這就是把上面那個「指南針 AI」拿來實際應用的過程。這個過程分成兩大步：

#### 步驟一：擴散（Diffusion）- 弄髒照片（正向過程）

這一步是在「準備」階段，AI 還沒上場。
* 想像你拿一張乾淨的貓咪照片。
* 你對它**加一點點雜訊**。
* 然後再加一點點...
* 再加一點點...
* ...重複 1000 次，直到這張照片變成**一片純粹的、隨機的雜訊**（像電視雪花）。

這個「從乾淨變到全髒」的過程，就叫做「擴散」。

#### 步驟二：生成（Reverse）- 把雜訊變回照片（反向過程）

這才是 AI 真正「畫圖」的時候，也是最神奇的地方。

1.  **起點：** 我們從一張**全新的、100% 純雜訊**的雪花圖開始（這張圖 AI 以前從沒見過）。
2.  **呼叫 AI 指南針：** 我們把這張 100% 的雜訊圖丟給我們訓練好的「去噪 AI」。
3.  **AI 的工作：** AI 會看著這片雜訊，然後說：「嗯... 根據我的訓練，這片雜訊『看起來』像是從某張乾淨圖片加了 1000 次雜訊變來的。我猜，『稍微乾淨一點』的方向是這邊！」（**這就是它在預測 Score/雜訊**）。
4.  **我們動一小步：** 我們聽 AI 的話，朝它指的方向走*一小步*。現在，這張圖變成了「99.9% 雜訊 + 0.1% 隱約的結構」。
5.  **重複：**
    * 我們拿這張 99.9% 雜訊的圖，再丟給 AI。
    * AI 再看一次：「OK，現在是 99.9% 髒，我再告訴你『更乾淨一點』的方向...」
    * 我們再走一小步... KER 99.8% 雜訊...
6.  **一路到底：**
    * 我們重複這個「問 AI 方向 → 走一小步」的過程 1000 次。
    * 每一步，AI 都在把圖片往「更像真實圖片」的方向推。
    * 雜訊會一步一步地被「排擠」出去，而圖片的結構（輪廓、眼睛、毛髮）會像雕刻一樣，慢慢地從雜訊中浮現出來。
    * **最後，雜訊完全消失，一張全新的、AI 創造的貓咪照片就誕生了！**

**總結：**
* **Score Matching：** 訓練一個 AI，讓它學會「如何從一張髒圖，找出通往乾淨圖」的**方向（Score）**。
* **Diffusion Model：** **實際使用**這個 AI。從「純雜訊」出發，一步一步跟著 AI 指的方向走，直到「雕刻」出一張完整的、乾淨的圖片。

## Unanswered Question

在去噪的時候會設定一個參數T，來決定走了幾步可以去噪完成，就像上課老師說的，像是微積分中極限的概念，往某個點愈來愈靠近，但是T的大小會影響訓練模型的時間，有沒有可能我們可以跳步，本來是一步一步的前進，改成一次前進兩步，這樣就可以縮短時間了。